(this.webpackJsonpethiopia=this.webpackJsonpethiopia||[]).push([[0],{21:function(t,e,n){},22:function(t,e,n){},33:function(t,e,n){"use strict";n.r(e);var i=n(0),a=n.n(i),o=n(10),r=n.n(o),s=(n(21),n(22),n(8)),c=n.n(s),l=n(11),u=n(4),p=n(2),h=n.n(p),g=(n(24),n(35)),f=n(36),d=n(37),L=n(38),j=n(40),b=n(39),y=n(14),O=n.n(y),m=n(1);function x(t){var e=t.forecast,n=function(t){for(var e=t.timeseries[0].time,n=t.timeseries[t.timeseries.length-1].time,i=[],a=new Date(e);a<=new Date(n);a.setHours(a.getHours()+1))i.push(a.toISOString());return i}(e.properties),i=[],a=[];e.properties.timeseries.forEach((function(t,e){if(t.data.next_1_hours)a.push(t.data.next_1_hours.details.precipitation_amount),i.push(t.data.instant.details.air_temperature);else if(t.data.next_6_hours){for(var n=t.data.next_6_hours.details.precipitation_amount,o=0;o<6;o++)a.push(n/6);for(var r=0;r<5;r++)i.push(null);i.push(t.data.instant.details.air_temperature)}}));var o={x:n,y:i,type:"scatter",name:"Temperature",mode:"lines",yaxis:"y",visible:!0,connectgaps:!0,marker:{color:"rgb(220,20,60)",size:12}},r={x:n,y:a,type:"bar",name:"Precipitation",yaxis:"y2",opacity:.3,visible:!0,marker:{color:"rgb(30,144,255)"}};return Object(m.jsx)(O.a,{data:[o,r],layout:{width:740,height:400,title:"Forecast for lat: "+e.geometry.coordinates[1]+", long: "+e.geometry.coordinates[0],xaxis:{title:"Time",showgrid:!0,zeroline:!1},yaxis:{title:"Celsius",zeroline:!1,showgrid:!1,showline:!0},yaxis2:{title:"Precipitation (mm/h)",zeroline:!1,showgrid:!1,side:"right",overlaying:"y"}},config:{displayModeBar:!1}})}function v(t){var e=t.position,n=Object(i.useState)(null),a=Object(u.a)(n,2),o=a[0],r=a[1];return Object(i.useEffect)((function(){(function(){var t=Object(l.a)(c.a.mark((function t(){var n,i,a,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Math.round(1e3*e.lat)/1e3,i=Math.round(1e3*e.lng)/1e3,a="".concat("https://api.met.no/weatherapi/locationforecast/2.0/complete.json?","lat=").concat(n,"&lon=").concat(i),t.next=5,fetch(a);case 5:return o=t.sent,t.next=8,o.json();case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()().then((function(t){r(t)}))}),[e]),null==o?Object(m.jsx)("p",{children:"Waiting..."}):Object(m.jsx)(x,{forecast:o})}var _=n(15),w=n(16),S=h.a.icon({iconUrl:_.a,shadowUrl:w.a});function k(){var t=Object(i.useState)(null),e=Object(u.a)(t,2),n=e[0],a=e[1];return Object(g.a)({click:function(t){a(t.latlng)}}),null===n?null:Object(m.jsx)(f.a,{position:n,children:Object(m.jsx)(d.a,{children:Object(m.jsx)(v,{position:n})})})}function F(){var t=Object(i.useState)(),e=Object(u.a)(t,2),n=e[0],a=e[1];return Object(i.useEffect)((function(){var t=function(){var t=Object(l.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:fetch("/ethiopia_boundary.geojson").then((function(t){if(t.ok)return t.json()})).then((function(t){a(t)}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();!function(){var t=h.a.LineUtil.isFlat?h.a.LineUtil.isFlat:h.a.LineUtil._flat;!function(e){var n=[e.latLng([90,180]),e.latLng([90,-180]),e.latLng([-90,-180]),e.latLng([-90,180])];e.Polygon.prototype.toGeoJSON,e.extend(e.Polygon.prototype,{_setLatLngs:function(i){this._originalLatLngs=i,t(this._originalLatLngs)&&(this._originalLatLngs=[this._originalLatLngs]),n=this.options.worldLatLngs?this.options.worldLatLngs:n;var a=[];for(var o in a.push(n),i)a.push(i[o]);i=[a],e.Polyline.prototype._setLatLngs.call(this,i)},getBounds:function(){return this._originalLatLngs?new e.LatLngBounds(this._originalLatLngs):new e.LatLngBounds(this.getLatLngs())},getLatLngs:function(){return this._originalLatLngs},toGeoJSON:function(n){var i=!t(this._originalLatLngs),a=i&&!t(this._originalLatLngs[0]),o=e.GeoJSON.latLngsToCoords(this._originalLatLngs,a?2:i?1:0,!0,n);return i||(o=[o]),e.GeoJSON.getFeature(this,{type:(a?"Multi":"")+"Polygon",coordinates:o})}})}(h.a)}(),t(),console.log("load boundary")}),[]),Object(m.jsxs)(L.a,{center:[9.016667,38.75],zoom:7,scrollWheelZoom:!1,children:[Object(m.jsx)(j.a,{attribution:"\xa9 <a href='http://osm.org/copyright'>OpenStreetMap</a> contributors",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),n&&Object(m.jsx)(b.a,{data:n,pathOptions:{fill:!0,fillColor:"#808080",fillOpacity:.5}}),Object(m.jsx)(k,{})]})}h.a.Marker.prototype.options.icon=S;var P=function(){return Object(m.jsx)("div",{className:"App",children:Object(m.jsx)(F,{})})},M=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,41)).then((function(e){var n=e.getCLS,i=e.getFID,a=e.getFCP,o=e.getLCP,r=e.getTTFB;n(t),i(t),a(t),o(t),r(t)}))};r.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(P,{})}),document.getElementById("root")),M()}},[[33,1,2]]]);
//# sourceMappingURL=main.af482870.chunk.js.map